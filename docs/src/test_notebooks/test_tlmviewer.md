# Test tlmviewer


```python
# RENDERING RAYS

import torch
import torchlensmaker as tlm

start = torch.tensor([[0, 0], [0, 0]])
end = torch.tensor([[10, 10], [-10, -10]])
variables = {
    "base": torch.tensor([0.5, 0.6]),
    "object": torch.tensor([10.0, 11.0]),
}
domain = {
    "base": [0, 1],
    "object": [0, 12]
}

scene = tlm.viewer.new_scene("2D")
scene["data"].append(tlm.viewer.render_rays(start, end, 0, variables, domain))
tlm.viewer.ipython_display(scene,dump=True)
```

    {"mode": "2D", "camera": "XY", "data": [{"type": "rays", "points": [[0, 0, 10, 10], [0, 0, -10, -10]], "color": "#ffa724", "variables": {"base": [0.5, 0.6000000238418579], "object": [10.0, 11.0]}, "domain": {"base": [0, 1], "object": [0, 12]}, "layers": [0]}]}



<div data-jp-suppress-context-menu id='tlmviewer-914314c7' class='tlmviewer' style='width: 100%; aspect-ratio: 16 / 9;'></div><script type='module'>async function importtlm() {
    try {
        return await import("/tlmviewer.js");
    } catch (error) {
        console.log("error", error);
        return await import("/files/test_notebooks/tlmviewer.js");
    }
}

const module = await importtlm();
const tlmviewer = module.tlmviewer;

const data = '{"mode": "2D", "camera": "XY", "data": [{"type": "rays", "points": [[0, 0, 10, 10], [0, 0, -10, -10]], "color": "#ffa724", "variables": {"base": [0.5, 0.6000000238418579], "object": [10.0, 11.0]}, "domain": {"base": [0, 1], "object": [0, 12]}, "layers": [0]}]}';

setTimeout(() => {
    tlmviewer.embed(document.getElementById("tlmviewer-914314c7"), data);    
}, 0);
</script>



```python
# RENDER 2D SURFACES

import torchlensmaker as tlm

from torchlensmaker.testing.basic_transform import basic_transform


test_data = [
    (basic_transform(1.0, "extent", 0., [35/2., 15]), tlm.SphereR(35.0, 35/2)),
    (basic_transform(-1.0, "extent", 0., [35/2., 15]), tlm.SphereR(35.0, 35/2)),

    (basic_transform(1.0, "extent", 50., [40., 5]), tlm.Parabola(125.0, 0.01)),

    (basic_transform(1.0, "extent", -50., [-40., 5]), tlm.CircularPlane(100.)),
    (basic_transform(1.0, "extent", 50., [-40., 5]), tlm.SquarePlane(100.)),
]

test_surfaces = [s for t, s in test_data]
test_transforms = [t(s) for t, s in test_data]

scene = tlm.viewer.new_scene("2D")


scene["data"].append(tlm.viewer.render_surfaces(test_surfaces, test_transforms, dim=2))

tlm.viewer.ipython_display(scene)
#tlm.viewer.ipython_display(scene, ndigits=3, dump=True)
```


<div data-jp-suppress-context-menu id='tlmviewer-92d6ec50' class='tlmviewer' style='width: 100%; aspect-ratio: 16 / 9;'></div><script type='module'>async function importtlm() {
    try {
        return await import("/tlmviewer.js");
    } catch (error) {
        console.log("error", error);
        return await import("/files/test_notebooks/tlmviewer.js");
    }
}

const module = await importtlm();
const tlmviewer = module.tlmviewer;

const data = '{"mode": "2D", "camera": "XY", "data": [{"type": "surfaces", "data": [{"matrix": [[1.0, 0.0, 0.0], [0.0, 1.0, 15.0], [0.0, 0.0, 1.0]], "samples": [[17.5, 17.5], [16.944761163783816, 17.49118949170574], [16.390081406010122, 17.464766838257976], [15.836519242176802, 17.42075864502898], [15.284632062459389, 17.35920922453892], [14.734975570466377, 17.2801805518369], [14.188103223692824, 17.183752202097367], [13.644565676235539, 17.070021270494625], [13.104910224331116, 16.939102274436234], [12.569680255274982, 16.791127038253705], [12.039414700276478, 16.626244560466546], [11.514647491800797, 16.444620863753396], [10.99590702594427, 16.246438827781272], [10.48371563038426, 16.03189800506122], [9.978589038439496, 15.80121442001587], [9.481035869770318, 15.55462035146116], [8.9915571182418, 15.292364098721238], [8.510645647465386, 15.014709731612097], [8.038785694527041, 14.721936824545669], [7.576452382401515, 14.414340175022074], [7.124111241543796, 14.092229506793528], [6.682217741139407, 13.755929157998779], [6.251216830485561, 13.405777754582115], [5.831542490964898, 13.042127869325709], [5.423617299063043, 12.66534566683873], [5.027852000869899, 12.27581053486062], [4.64464509849317, 11.873914702249813], [4.274382448800482, 11.460062844042492], [3.917436874894257, 11.034671673979147], [3.5741677907104368, 10.598169524909165], [3.244920839119125, 10.150995917495969], [2.9300275438915016, 9.693601117656932], [2.6298049758835003, 9.226445683183798], [2.3445554337723227, 8.749999999999998], [2.074566139667315, 8.26474380852195], [1.8201089499016234, 7.77116572060105], [1.581440081295927, 7.269762727533011], [1.3587998531698275, 6.761039699629751], [1.152412445360632, 6.245508877857759], [0.9624856724933011, 5.723689358054882], [0.7892107747287085, 5.196106568244808], [0.632762225201013, 4.663291739575613], [0.4932975543380209, 4.125781371414979], [0.3709571912413736, 3.5841166911408413], [0.26586432228635815, 3.03884310917128], [0.17812476708367697, 2.4905096697824907], [0.1078268719280544, 1.9396684982676955], [0.055041420841011046, 1.3868742449938025], [0.019821564297359373, 0.8326835269154893], [0.0022027657071852502, 0.2776543671091398], [0.0022027657071852502, -0.2776543671091356], [0.019821564297359373, -0.832683526915485], [0.05504142084100749, -1.3868742449937985], [0.1078268719280544, -1.939668498267691], [0.17812476708367697, -2.4905096697824862], [0.26586432228635815, -3.0388431091712755], [0.3709571912413736, -3.584116691140837], [0.4932975543380209, -4.125781371414974], [0.632762225201013, -4.663291739575608], [0.7892107747287049, -5.196106568244804], [0.9624856724933011, -5.723689358054878], [1.152412445360632, -6.245508877857755], [1.358799853169824, -6.761039699629747], [1.5814400812959253, -7.269762727533006], [1.8201089499016216, -7.771165720601046], [2.074566139667313, -8.264743808521944], [2.344555433772321, -8.749999999999995], [2.6298049758834985, -9.226445683183794], [2.9300275438914998, -9.693601117656929], [3.244920839119123, -10.150995917495965], [3.574167790710435, -10.598169524909162], [3.917436874894255, -11.034671673979144], [4.274382448800479, -11.460062844042488], [4.644645098493164, -11.87391470224981], [5.0278520008698955, -12.275810534860618], [5.423617299063039, -12.665345666838729], [5.831542490964894, -13.042127869325705], [6.251216830485559, -13.405777754582113], [6.682217741139404, -13.755929157998777], [7.124111241543785, -14.09222950679352], [7.576452382401504, -14.414340175022069], [8.038785694527045, -14.72193682454567], [8.51064564746539, -15.014709731612099], [8.991557118241797, -15.292364098721237], [9.481035869770315, -15.554620351461159], [9.978589038439491, -15.801214420015869], [10.483715630384253, -16.031898005061215], [10.995907025944259, -16.24643882778127], [11.514647491800801, -16.444620863753396], [12.039414700276478, -16.626244560466546], [12.56968025527498, -16.791127038253705], [13.10491022433111, -16.939102274436234], [13.644565676235535, -17.070021270494625], [14.188103223692815, -17.183752202097367], [14.734975570466368, -17.2801805518369], [15.284632062459377, -17.359209224538915], [15.836519242176806, -17.42075864502898], [16.390081406010122, -17.464766838257976], [16.944761163783816, -17.49118949170574], [17.499999999999996, -17.5]]}, {"matrix": [[-1.0, 0.0, 35.0], [0.0, -1.0, 15.0], [0.0, 0.0, 1.0]], "samples": [[17.5, 17.5], [16.944761163783816, 17.49118949170574], [16.390081406010122, 17.464766838257976], [15.836519242176802, 17.42075864502898], [15.284632062459389, 17.35920922453892], [14.734975570466377, 17.2801805518369], [14.188103223692824, 17.183752202097367], [13.644565676235539, 17.070021270494625], [13.104910224331116, 16.939102274436234], [12.569680255274982, 16.791127038253705], [12.039414700276478, 16.626244560466546], [11.514647491800797, 16.444620863753396], [10.99590702594427, 16.246438827781272], [10.48371563038426, 16.03189800506122], [9.978589038439496, 15.80121442001587], [9.481035869770318, 15.55462035146116], [8.9915571182418, 15.292364098721238], [8.510645647465386, 15.014709731612097], [8.038785694527041, 14.721936824545669], [7.576452382401515, 14.414340175022074], [7.124111241543796, 14.092229506793528], [6.682217741139407, 13.755929157998779], [6.251216830485561, 13.405777754582115], [5.831542490964898, 13.042127869325709], [5.423617299063043, 12.66534566683873], [5.027852000869899, 12.27581053486062], [4.64464509849317, 11.873914702249813], [4.274382448800482, 11.460062844042492], [3.917436874894257, 11.034671673979147], [3.5741677907104368, 10.598169524909165], [3.244920839119125, 10.150995917495969], [2.9300275438915016, 9.693601117656932], [2.6298049758835003, 9.226445683183798], [2.3445554337723227, 8.749999999999998], [2.074566139667315, 8.26474380852195], [1.8201089499016234, 7.77116572060105], [1.581440081295927, 7.269762727533011], [1.3587998531698275, 6.761039699629751], [1.152412445360632, 6.245508877857759], [0.9624856724933011, 5.723689358054882], [0.7892107747287085, 5.196106568244808], [0.632762225201013, 4.663291739575613], [0.4932975543380209, 4.125781371414979], [0.3709571912413736, 3.5841166911408413], [0.26586432228635815, 3.03884310917128], [0.17812476708367697, 2.4905096697824907], [0.1078268719280544, 1.9396684982676955], [0.055041420841011046, 1.3868742449938025], [0.019821564297359373, 0.8326835269154893], [0.0022027657071852502, 0.2776543671091398], [0.0022027657071852502, -0.2776543671091356], [0.019821564297359373, -0.832683526915485], [0.05504142084100749, -1.3868742449937985], [0.1078268719280544, -1.939668498267691], [0.17812476708367697, -2.4905096697824862], [0.26586432228635815, -3.0388431091712755], [0.3709571912413736, -3.584116691140837], [0.4932975543380209, -4.125781371414974], [0.632762225201013, -4.663291739575608], [0.7892107747287049, -5.196106568244804], [0.9624856724933011, -5.723689358054878], [1.152412445360632, -6.245508877857755], [1.358799853169824, -6.761039699629747], [1.5814400812959253, -7.269762727533006], [1.8201089499016216, -7.771165720601046], [2.074566139667313, -8.264743808521944], [2.344555433772321, -8.749999999999995], [2.6298049758834985, -9.226445683183794], [2.9300275438914998, -9.693601117656929], [3.244920839119123, -10.150995917495965], [3.574167790710435, -10.598169524909162], [3.917436874894255, -11.034671673979144], [4.274382448800479, -11.460062844042488], [4.644645098493164, -11.87391470224981], [5.0278520008698955, -12.275810534860618], [5.423617299063039, -12.665345666838729], [5.831542490964894, -13.042127869325705], [6.251216830485559, -13.405777754582113], [6.682217741139404, -13.755929157998777], [7.124111241543785, -14.09222950679352], [7.576452382401504, -14.414340175022069], [8.038785694527045, -14.72193682454567], [8.51064564746539, -15.014709731612099], [8.991557118241797, -15.292364098721237], [9.481035869770315, -15.554620351461159], [9.978589038439491, -15.801214420015869], [10.483715630384253, -16.031898005061215], [10.995907025944259, -16.24643882778127], [11.514647491800801, -16.444620863753396], [12.039414700276478, -16.626244560466546], [12.56968025527498, -16.791127038253705], [13.10491022433111, -16.939102274436234], [13.644565676235535, -17.070021270494625], [14.188103223692815, -17.183752202097367], [14.734975570466368, -17.2801805518369], [15.284632062459377, -17.359209224538915], [15.836519242176806, -17.42075864502898], [16.390081406010122, -17.464766838257976], [16.944761163783816, -17.49118949170574], [17.499999999999996, -17.5]]}, {"matrix": [[0.6427876096865394, -0.766044443118978, 14.891108996619558], [0.766044443118978, 0.6427876096865394, -24.92361105933508], [0.0, 0.0, 1.0]], "samples": [[39.0625, -62.5], [37.50015942250791, -61.23737373737374], [35.969703346597285, -59.974747474747474], [34.47113177226814, -58.71212121212121], [33.004444699520455, -57.44949494949495], [31.56964212835425, -56.186868686868685], [30.16672405876951, -54.92424242424242], [28.795690490766248, -53.66161616161616], [27.45654142434445, -52.398989898989896], [26.149276859504134, -51.13636363636364], [24.873896796245287, -49.87373737373738], [23.630401234567902, -48.611111111111114], [22.418790174471997, -47.34848484848485], [21.23906361595756, -46.08585858585859], [20.091221559024593, -44.823232323232325], [18.975264003673097, -43.56060606060606], [17.891190949903073, -42.2979797979798], [16.83900239771452, -41.035353535353536], [15.81869834710744, -39.77272727272727], [14.83027879808183, -38.51010101010101], [13.873743750637692, -37.24747474747475], [12.949093204775023, -35.984848484848484], [12.056327160493828, -34.72222222222222], [11.195445617794103, -33.45959595959596], [10.366448576675852, -32.1969696969697], [9.569336037139069, -30.934343434343436], [8.804107999183758, -29.671717171717173], [8.070764462809919, -28.40909090909091], [7.369305428017551, -27.14646464646465], [6.699730894806654, -25.883838383838388], [6.062040863177229, -24.621212121212125], [5.456235333129274, -23.35858585858586], [4.882314304662791, -22.0959595959596], [4.340277777777779, -20.833333333333336], [3.8301257524742383, -19.570707070707073], [3.351858228752169, -18.30808080808081], [2.905475206611571, -17.045454545454547], [2.4909766860524445, -15.782828282828286], [2.1083626670747897, -14.520202020202024], [1.757633149678605, -13.257575757575761], [1.4387881338638924, -11.994949494949498], [1.1518276196306507, -10.732323232323235], [0.8967516069788802, -9.469696969696972], [0.6735600959085816, -8.207070707070711], [0.4822530864197536, -6.944444444444448], [0.3228305785123971, -5.681818181818185], [0.19529257218651194, -4.419191919191923], [0.099639067442098, -3.1565656565656606], [0.035870064279155345, -1.893939393939398], [0.0039855626976839625, -0.6313131313131355], [0.0039855626976839625, 0.6313131313131355], [0.035870064279155345, 1.893939393939398], [0.099639067442098, 3.1565656565656606], [0.19529257218651194, 4.419191919191923], [0.3228305785123971, 5.681818181818185], [0.4822530864197536, 6.944444444444448], [0.6735600959085816, 8.207070707070711], [0.8967516069788802, 9.469696969696972], [1.1518276196306507, 10.732323232323235], [1.4387881338638924, 11.994949494949498], [1.757633149678605, 13.257575757575761], [2.1083626670747897, 14.520202020202024], [2.4909766860524445, 15.782828282828286], [2.905475206611571, 17.045454545454547], [3.351858228752169, 18.30808080808081], [3.8301257524742383, 19.570707070707073], [4.340277777777779, 20.833333333333336], [4.882314304662791, 22.0959595959596], [5.456235333129274, 23.35858585858586], [6.062040863177229, 24.621212121212125], [6.699730894806654, 25.883838383838388], [7.369305428017551, 27.14646464646465], [8.070764462809919, 28.40909090909091], [8.804107999183758, 29.671717171717173], [9.569336037139069, 30.934343434343436], [10.366448576675852, 32.1969696969697], [11.195445617794103, 33.45959595959596], [12.056327160493828, 34.72222222222222], [12.949093204775023, 35.984848484848484], [13.873743750637692, 37.24747474747475], [14.83027879808183, 38.51010101010101], [15.81869834710744, 39.77272727272727], [16.83900239771452, 41.035353535353536], [17.891190949903073, 42.2979797979798], [18.975264003673097, 43.56060606060606], [20.091221559024593, 44.823232323232325], [21.23906361595756, 46.08585858585859], [22.418790174471997, 47.34848484848485], [23.630401234567902, 48.611111111111114], [24.873896796245287, 49.87373737373738], [26.149276859504134, 51.13636363636364], [27.45654142434445, 52.398989898989896], [28.795690490766248, 53.66161616161616], [30.16672405876951, 54.92424242424242], [31.56964212835425, 56.186868686868685], [33.004444699520455, 57.44949494949495], [34.47113177226814, 58.71212121212121], [35.969703346597285, 59.974747474747474], [37.50015942250791, 61.23737373737374], [39.0625, 62.5]]}, {"matrix": [[0.6427876096865394, 0.766044443118978, -40.0], [-0.766044443118978, 0.6427876096865394, 5.0], [0.0, 0.0, 1.0]], "samples": [[0.0, -50.0], [0.0, -48.98989898989899], [0.0, -47.97979797979798], [0.0, -46.96969696969697], [0.0, -45.95959595959596], [0.0, -44.94949494949495], [0.0, -43.93939393939394], [0.0, -42.92929292929293], [0.0, -41.91919191919192], [0.0, -40.90909090909091], [0.0, -39.898989898989896], [0.0, -38.888888888888886], [0.0, -37.878787878787875], [0.0, -36.868686868686865], [0.0, -35.858585858585855], [0.0, -34.848484848484844], [0.0, -33.838383838383834], [0.0, -32.82828282828283], [0.0, -31.818181818181817], [0.0, -30.808080808080806], [0.0, -29.797979797979796], [0.0, -28.787878787878785], [0.0, -27.777777777777775], [0.0, -26.767676767676765], [0.0, -25.757575757575758], [0.0, -24.747474747474747], [0.0, -23.737373737373737], [0.0, -22.727272727272727], [0.0, -21.717171717171716], [0.0, -20.707070707070706], [0.0, -19.696969696969695], [0.0, -18.686868686868685], [0.0, -17.676767676767675], [0.0, -16.666666666666664], [0.0, -15.656565656565654], [0.0, -14.646464646464644], [0.0, -13.636363636363633], [0.0, -12.626262626262625], [0.0, -11.616161616161614], [0.0, -10.606060606060604], [0.0, -9.595959595959593], [0.0, -8.585858585858583], [0.0, -7.575757575757573], [0.0, -6.565656565656563], [0.0, -5.555555555555553], [0.0, -4.545454545454542], [0.0, -3.5353535353535324], [0.0, -2.5252525252525224], [0.0, -1.515151515151512], [0.0, -0.5050505050505019], [0.0, 0.5050505050505019], [0.0, 1.515151515151512], [0.0, 2.5252525252525224], [0.0, 3.5353535353535324], [0.0, 4.545454545454542], [0.0, 5.555555555555553], [0.0, 6.565656565656563], [0.0, 7.575757575757573], [0.0, 8.585858585858583], [0.0, 9.595959595959593], [0.0, 10.606060606060604], [0.0, 11.616161616161614], [0.0, 12.626262626262625], [0.0, 13.636363636363633], [0.0, 14.646464646464644], [0.0, 15.656565656565654], [0.0, 16.666666666666664], [0.0, 17.676767676767675], [0.0, 18.686868686868685], [0.0, 19.696969696969695], [0.0, 20.707070707070706], [0.0, 21.717171717171716], [0.0, 22.727272727272727], [0.0, 23.737373737373737], [0.0, 24.747474747474747], [0.0, 25.757575757575758], [0.0, 26.767676767676765], [0.0, 27.777777777777775], [0.0, 28.787878787878785], [0.0, 29.797979797979796], [0.0, 30.808080808080806], [0.0, 31.818181818181817], [0.0, 32.82828282828283], [0.0, 33.838383838383834], [0.0, 34.848484848484844], [0.0, 35.858585858585855], [0.0, 36.868686868686865], [0.0, 37.878787878787875], [0.0, 38.888888888888886], [0.0, 39.898989898989896], [0.0, 40.90909090909091], [0.0, 41.91919191919192], [0.0, 42.92929292929293], [0.0, 43.93939393939394], [0.0, 44.94949494949495], [0.0, 45.95959595959596], [0.0, 46.96969696969697], [0.0, 47.97979797979798], [0.0, 48.98989898989899], [0.0, 50.0]]}, {"matrix": [[0.6427876096865394, -0.766044443118978, -40.0], [0.766044443118978, 0.6427876096865394, 5.0], [0.0, 0.0, 1.0]], "samples": [[0.0, -70.71067811865476], [0.0, -69.28217957080314], [0.0, -67.85368102295153], [0.0, -66.42518247509992], [0.0, -64.99668392724831], [0.0, -63.5681853793967], [0.0, -62.139686831545085], [0.0, -60.711188283693474], [0.0, -59.28268973584186], [0.0, -57.85419118799025], [0.0, -56.42569264013864], [0.0, -54.99719409228703], [0.0, -53.56869554443542], [0.0, -52.14019699658381], [0.0, -50.7116984487322], [0.0, -49.28319990088059], [0.0, -47.85470135302897], [0.0, -46.42620280517736], [0.0, -44.99770425732575], [0.0, -43.56920570947414], [0.0, -42.14070716162253], [0.0, -40.71220861377092], [0.0, -39.28371006591931], [0.0, -37.8552115180677], [0.0, -36.42671297021609], [0.0, -34.99821442236448], [0.0, -33.569715874512866], [0.0, -32.14121732666125], [0.0, -30.71271877880964], [0.0, -29.28422023095803], [0.0, -27.855721683106417], [0.0, -26.427223135254806], [0.0, -24.998724587403196], [0.0, -23.570226039551585], [0.0, -22.141727491699974], [0.0, -20.71322894384836], [0.0, -19.28473039599675], [0.0, -17.85623184814514], [0.0, -16.42773330029353], [0.0, -14.999234752441916], [0.0, -13.570736204590306], [0.0, -12.142237656738695], [0.0, -10.713739108887083], [0.0, -9.285240561035472], [0.0, -7.856742013183861], [0.0, -6.428243465332249], [0.0, -4.999744917480639], [0.0, -3.5712463696290273], [0.0, -2.142747821777416], [0.0, -0.7142492739258046], [0.0, 0.7142492739258046], [0.0, 2.142747821777416], [0.0, 3.5712463696290273], [0.0, 4.999744917480639], [0.0, 6.428243465332249], [0.0, 7.856742013183861], [0.0, 9.285240561035472], [0.0, 10.713739108887083], [0.0, 12.142237656738695], [0.0, 13.570736204590306], [0.0, 14.999234752441916], [0.0, 16.42773330029353], [0.0, 17.85623184814514], [0.0, 19.28473039599675], [0.0, 20.71322894384836], [0.0, 22.141727491699974], [0.0, 23.570226039551585], [0.0, 24.998724587403196], [0.0, 26.427223135254806], [0.0, 27.855721683106417], [0.0, 29.28422023095803], [0.0, 30.71271877880964], [0.0, 32.14121732666125], [0.0, 33.569715874512866], [0.0, 34.99821442236448], [0.0, 36.42671297021609], [0.0, 37.8552115180677], [0.0, 39.28371006591931], [0.0, 40.71220861377092], [0.0, 42.14070716162253], [0.0, 43.56920570947414], [0.0, 44.99770425732575], [0.0, 46.42620280517736], [0.0, 47.85470135302897], [0.0, 49.28319990088059], [0.0, 50.7116984487322], [0.0, 52.14019699658381], [0.0, 53.56869554443542], [0.0, 54.99719409228703], [0.0, 56.42569264013864], [0.0, 57.85419118799025], [0.0, 59.28268973584186], [0.0, 60.711188283693474], [0.0, 62.139686831545085], [0.0, 63.5681853793967], [0.0, 64.99668392724831], [0.0, 66.42518247509992], [0.0, 67.85368102295153], [0.0, 69.28217957080314], [0.0, 70.71067811865476]]}]}]}';

setTimeout(() => {
    tlmviewer.embed(document.getElementById("tlmviewer-92d6ec50"), data);    
}, 0);
</script>



```python
# RENDER 3D SURFACES

import torchlensmaker as tlm

test_data = [
    (basic_transform(1.0, "origin", [45., 10., 0.], [0., 0., 0.]), tlm.Sphere(15.0, 1e6)),
    (basic_transform(1.0, "origin", [45., -10., 0.], [10., 0., -10.]), tlm.Sphere(25.0, 20)),
    (basic_transform(1.0, "origin", [45.0, -25.0, 0.0], [0.0, 0.0, 0.0]), tlm.Parabola(30., 0.05)),
    (basic_transform(1.0, "origin", [45.0, 0.0, 15.0], [-10.0, 10.0, 5.0]), tlm.SquarePlane(30.)),
    (basic_transform(1.0, "origin", [45., -60., 0.], [80., 0., 0.]), tlm.CircularPlane(50.)),
]

test_surfaces = [s for t, s in test_data]
test_transforms = [t(s) for t, s in test_data]

scene = tlm.viewer.new_scene("3D")
scene["data"].append(tlm.viewer.render_surfaces(test_surfaces, test_transforms, dim=3))

tlm.viewer.ipython_display(scene)
#tlm.viewer.ipython_display(scene,ndigits=2,dump=True)
```


<div data-jp-suppress-context-menu id='tlmviewer-b5dce371' class='tlmviewer' style='width: 100%; aspect-ratio: 16 / 9;'></div><script type='module'>async function importtlm() {
    try {
        return await import("/tlmviewer.js");
    } catch (error) {
        console.log("error", error);
        return await import("/files/test_notebooks/tlmviewer.js");
    }
}

const module = await importtlm();
const tlmviewer = module.tlmviewer;

const data = '{"mode": "3D", "camera": "orthographic", "data": [{"type": "surfaces", "data": [{"matrix": [[0.984807753012208, 0.0, 0.17364817766693033, 0.0], [0.12278780396897282, 0.7071067811865476, -0.6963642403200189, 0.0], [-0.12278780396897285, 0.7071067811865475, 0.696364240320019, 0.0], [0.0, 0.0, 0.0, 1.0]], "samples": [[0.0, 0.0], [2.869605142332419e-09, 0.07575757575757576], [1.1478420569329726e-08, 0.15151515151515152], [2.5826446280992072e-08, 0.2272727272727273], [4.591368227731969e-08, 0.30303030303030304], [7.174012855831293e-08, 0.3787878787878788], [1.033057851239723e-07, 0.4545454545454546], [1.406106519742982e-07, 0.5303030303030303], [1.8365472910929143e-07, 0.6060606060606061], [2.3243801652895266e-07, 0.6818181818181819], [2.8696051423328265e-07, 0.7575757575757576], [3.4722222222228254e-07, 0.8333333333333334], [4.132231404959532e-07, 0.9090909090909092], [4.849632690542957e-07, 0.9848484848484849], [5.624426078973114e-07, 1.0606060606060606], [6.45661157025002e-07, 1.1363636363636365], [7.34618916437368e-07, 1.2121212121212122], [8.293158861344118e-07, 1.2878787878787878], [9.297520661161348e-07, 1.3636363636363638], [1.0359274563825385e-06, 1.4393939393939394], [1.1478420569336246e-06, 1.5151515151515151], [1.265495867769396e-06, 1.590909090909091], [1.3888888888898535e-06, 1.6666666666666667], [1.5180211202949996e-06, 1.7424242424242424], [1.6528925619848373e-06, 1.8181818181818183], [1.7935032139593681e-06, 1.893939393939394], [1.9398530762185937e-06, 1.9696969696969697], [2.091942148762519e-06, 2.0454545454545454], [2.2497704315911435e-06, 2.121212121212121], [2.4133379247044737e-06, 2.1969696969696972], [2.5826446281025094e-06, 2.272727272727273], [2.7576905417852535e-06, 2.3484848484848486], [2.9384756657527104e-06, 2.4242424242424243], [3.1250000000048824e-06, 2.5], [3.317263544541774e-06, 2.5757575757575757], [3.5152662993633863e-06, 2.6515151515151514], [3.7190082644697257e-06, 2.7272727272727275], [3.928489439860793e-06, 2.803030303030303], [4.143709825536593e-06, 2.878787878787879], [4.364669421497128e-06, 2.9545454545454546], [4.591368227742404e-06, 3.0303030303030303], [4.823806244272423e-06, 3.106060606060606], [5.0619834710871926e-06, 3.181818181818182], [5.305899908186713e-06, 3.257575757575758], [5.555555555570988e-06, 3.3333333333333335], [5.810950413240024e-06, 3.409090909090909], [6.072084481193825e-06, 3.484848484848485], [6.338957759432395e-06, 3.5606060606060606], [6.611570247955742e-06, 3.6363636363636367], [6.889921946763864e-06, 3.7121212121212124], [7.17401285585677e-06, 3.7878787878787876], [7.463842975234465e-06, 3.8636363636363633], [7.759412304896955e-06, 3.9393939393939394], [8.06072084484424e-06, 4.015151515151515], [8.367768595076331e-06, 4.090909090909091], [8.680555555593233e-06, 4.166666666666667], [8.999081726394943e-06, 4.242424242424242], [9.323347107481479e-06, 4.318181818181818], [9.653351698852835e-06, 4.393939393939394], [9.989095500509028e-06, 4.46969696969697], [1.0330578512450053e-05, 4.545454545454545], [1.0677800734675922e-05, 4.621212121212121], [1.1030762167186642e-05, 4.696969696969697], [1.1389462809982214e-05, 4.7727272727272725], [1.175390266306265e-05, 4.848484848484849], [1.2124081726427949e-05, 4.924242424242424], [1.2500000000078124e-05, 5.0], [1.2881657484013183e-05, 5.075757575757576], [1.326905417823312e-05, 5.151515151515151], [1.3662190082737957e-05, 5.2272727272727275], [1.4061065197527688e-05, 5.303030303030303], [1.4465679522602334e-05, 5.378787878787879], [1.4876033057961885e-05, 5.454545454545454], [1.529212580360636e-05, 5.53030303030303], [1.5713957759535773e-05, 5.606060606060606], [1.614152892575011e-05, 5.681818181818182], [1.657483930224939e-05, 5.757575757575758], [1.7013888889033622e-05, 5.833333333333333], [1.7458677686102813e-05, 5.909090909090909], [1.7909205693456968e-05, 5.984848484848484], [1.8365472911096098e-05, 6.0606060606060606], [1.8827479339020212e-05, 6.136363636363637], [1.929522497722931e-05, 6.212121212121212], [1.9768709825723408e-05, 6.287878787878788], [2.0247933884502507e-05, 6.363636363636363], [2.0732897153566627e-05, 6.4393939393939394], [2.122359963291576e-05, 6.515151515151515], [2.1720041322549927e-05, 6.590909090909091], [2.2222222222469137e-05, 6.666666666666667], [2.273014233267339e-05, 6.742424242424242], [2.3243801653162703e-05, 6.818181818181818], [2.3763200183937074e-05, 6.893939393939394], [2.428833792499652e-05, 6.96969696969697], [2.481921487634106e-05, 7.045454545454546], [2.5355831037970675e-05, 7.121212121212121], [2.5898186409885403e-05, 7.196969696969697], [2.644628099208524e-05, 7.2727272727272725], [2.70001147845702e-05, 7.348484848484849], [2.755968778734028e-05, 7.424242424242424], [2.812500000039551e-05, 7.5]]}, {"matrix": [[0.984807753012208, 0.0, -0.17364817766693033, 10.0], [-0.12278780396897282, 0.7071067811865476, -0.6963642403200189, 0.0], [0.12278780396897285, 0.7071067811865475, 0.696364240320019, -10.0], [0.0, 0.0, 0.0, 1.0]], "samples": [[4.387505004004007, 12.500000000000004], [4.302624807131956, 12.393240579216194], [4.218474625395373, 12.28590480390884], [4.135058372245101, 12.177997665787663], [4.052379927000247, 12.069524183133955], [3.9704431346677325, 11.960489400567148], [3.8892518057635073, 11.850898388810258], [3.808809716135343, 11.740756244454044], [3.7291206067871983, 11.63006808971998], [3.6501881837052856, 11.518839072222066], [3.572016117685706, 11.407074364727432], [3.494608044163712, 11.294779164915745], [3.417967563044691, 11.181958695137538], [3.342098238536689, 11.068618202171287], [3.2670035989847115, 10.95476295697946], [3.192687136706599, 10.84039825446336], [3.1191523078306247, 10.725529413216856], [3.046402532134781, 10.610161775279112], [2.9744411928876993, 10.494300705886069], [2.9032716366913682, 10.377951593220994], [2.8328971733254527, 10.261119848163883], [2.763321075593378, 10.143810904039789], [2.69454657917014, 10.026030216366202], [2.626576882451829, 9.9077832625993], [2.559415146406863, 9.78907554187921], [2.493064494429021, 9.669912574774301], [2.4275280121921377, 9.550299903024408], [2.362808747506662, 9.430243089283145], [2.298909710177881, 9.3097477168592], [2.235833871865939, 9.188819389456649], [2.17358416594767, 9.067463730914413], [2.112163487380151, 8.945686384944654], [2.051574692566092, 8.82349301487036], [1.9918205992209899, 8.70088930336196], [1.9329039862420743, 8.577880952173004], [1.874827593579095, 8.454473681875067], [1.8175941221068896, 8.330673231591673], [1.7612062334997738, 8.20648535873138], [1.7056665501077752, 8.081915838720073], [1.650977654834648, 7.956970464732327], [1.5971420910177905, 7.8316550474220294], [1.5441623623099474, 7.705975414652142], [1.4920409325627624, 7.579937411223643], [1.4407802257122313, 7.45354689860377], [1.3903826256659322, 7.326809754653362], [1.3408504761922018, 7.199731873353566], [1.2921860808111134, 7.072319164531709], [1.244391702687338, 6.944577553586431], [1.1974695645249405, 6.816512981212172], [1.1514218484639613, 6.688131403122877], [1.106250695978968, 6.559438789774984], [1.061958207779444, 6.43044112608984], [1.0185464437121041, 6.301144411175289], [0.9760174226651088, 6.171554658046745], [0.934373122474156, 6.041677893347525], [0.8936154798305154, 5.911520157068555], [0.8537463901909454, 5.781087502267523], [0.8147677076895725, 5.650385994787359], [0.7766812450516234, 5.519421712974105], [0.7394887735091658, 5.388200747394309], [0.703192022718703, 5.2567292005517015], [0.6677926806807548, 5.125013186603461], [0.6332923936613426, 4.993058831075843], [0.5996927661154459, 4.860872270579287], [0.566995360612367, 4.728459652523084], [0.5352016977630711, 4.5958271348294275], [0.5043132561494836, 4.462980885647085], [0.4743314722556988, 4.329927083064533], [0.4452577404011997, 4.1966719148226], [0.4170934126760031, 4.063221578026771], [0.38983979887778375, 3.929582278858943], [0.363498166450956, 3.7957602322887944], [0.3380697404277484, 3.6617616617848054], [0.3135557033712004, 3.527592799024762], [0.2899571953201949, 3.3932598836060173], [0.267275313736441, 3.25876916275528], [0.24551111345340715, 3.1241268910380633], [0.22466560662729762, 2.989339330067872], [0.20473976268995742, 2.8544127482149326], [0.18573450830380978, 2.719353420314744], [0.16765072731874398, 2.5841676273762304], [0.1504892607310211, 2.4488616562896173], [0.13425090664415862, 2.313441799534108], [0.11893642023181528, 2.177914354885223], [0.10454651370267243, 2.042285625121889], [0.09108185626730858, 1.9065619177333903], [0.07854307410708117, 1.7707495446259622], [0.0669307503450085, 1.6348548218293144], [0.05624542501864127, 1.4988840692028753], [0.04648759505496258, 1.3628436101418562], [0.03765771424725983, 1.2267397712832397], [0.029756193234035777, 1.0905788822114857], [0.022783399479905597, 0.9543672751642324], [0.016739657258511897, 0.818111284737786], [0.011625247637429226, 0.6818172475924997], [0.0074404084651220614, 0.5454915021581362], [0.004185334359849691, 0.409140388339071], [0.0018601767006352077, 0.2727702472194229], [0.00046504362023469525, 0.13638742076822166], [7.460698725481052e-14, -1.748455600074495e-06]]}, {"matrix": [[0.9063077870366499, 0.0, -0.42261826174069944, 0.0], [-0.29883623873011983, 0.7071067811865476, -0.6408563820557884, 0.0], [0.29883623873011983, 0.7071067811865475, 0.6408563820557885, 0.0], [0.0, 0.0, 0.0, 1.0]], "samples": [[0.0, 0.0], [0.0011478420569329662, 0.15151515151515152], [0.004591368227731865, 0.30303030303030304], [0.010330578512396696, 0.4545454545454546], [0.01836547291092746, 0.6060606060606061], [0.02869605142332415, 0.7575757575757576], [0.041322314049586785, 0.9090909090909092], [0.05624426078971533, 1.0606060606060606], [0.07346189164370984, 1.2121212121212122], [0.09297520661157027, 1.3636363636363638], [0.1147842056932966, 1.5151515151515151], [0.13888888888888892, 1.6666666666666667], [0.16528925619834714, 1.8181818181818183], [0.19398530762167127, 1.9696969696969697], [0.22497704315886133, 2.121212121212121], [0.25826446280991744, 2.272727272727273], [0.29384756657483935, 2.4242424242424243], [0.3317263544536272, 2.5757575757575757], [0.3719008264462811, 2.7272727272727275], [0.4143709825528008, 2.878787878787879], [0.4591368227731864, 3.0303030303030303], [0.5061983471074382, 3.181818181818182], [0.5555555555555557, 3.3333333333333335], [0.607208448117539, 3.484848484848485], [0.6611570247933886, 3.6363636363636367], [0.7174012855831039, 3.787878787878788], [0.7759412304866851, 3.9393939393939394], [0.8367768595041323, 4.090909090909091], [0.8999081726354453, 4.242424242424242], [0.9653351698806247, 4.3939393939393945], [1.0330578512396698, 4.545454545454546], [1.1030762167125805, 4.696969696969697], [1.1753902662993574, 4.848484848484849], [1.25, 5.0], [1.3269054178145088, 5.151515151515151], [1.4061065197428833, 5.303030303030303], [1.4876033057851243, 5.454545454545455], [1.5713957759412307, 5.606060606060606], [1.6574839302112032, 5.757575757575758], [1.7458677685950414, 5.909090909090909], [1.8365472910927456, 6.0606060606060606], [1.929522497704316, 6.212121212121212], [2.0247933884297526, 6.363636363636364], [2.1223599632690546, 6.515151515151516], [2.2222222222222228, 6.666666666666667], [2.3243801652892566, 6.818181818181818], [2.428833792470156, 6.96969696969697], [2.535583103764922, 7.121212121212121], [2.6446280991735542, 7.272727272727273], [2.755968778696052, 7.424242424242425], [2.8696051423324147, 7.575757575757575], [2.985537190082644, 7.727272727272727], [3.1037649219467403, 7.878787878787879], [3.224288337924701, 8.03030303030303], [3.347107438016529, 8.181818181818182], [3.472222222222223, 8.333333333333334], [3.5996326905417813, 8.484848484848484], [3.7293388429752072, 8.636363636363637], [3.861340679522497, 8.787878787878787], [3.9956382001836546, 8.93939393939394], [4.132231404958676, 9.09090909090909], [4.2711202938475665, 9.242424242424242], [4.412304866850322, 9.393939393939394], [4.555785123966942, 9.545454545454545], [4.70156106519743, 9.696969696969697], [4.849632690541782, 9.848484848484848], [5.0, 10.0], [5.152662993572086, 10.151515151515152], [5.307621671258035, 10.303030303030303], [5.464876033057852, 10.454545454545455], [5.624426078971533, 10.606060606060606], [5.786271808999082, 10.757575757575758], [5.950413223140496, 10.909090909090908], [6.116850321395776, 11.06060606060606], [6.285583103764923, 11.212121212121213], [6.456611570247934, 11.363636363636363], [6.629935720844813, 11.515151515151516], [6.8055555555555545, 11.666666666666666], [6.983471074380166, 11.818181818181818], [7.16368227731864, 11.969696969696969], [7.3461891643709825, 12.121212121212121], [7.530991735537191, 12.272727272727273], [7.718089990817264, 12.424242424242424], [7.907483930211204, 12.575757575757576], [8.099173553719009, 12.727272727272727], [8.29315886134068, 12.878787878787879], [8.489439853076217, 13.03030303030303], [8.68801652892562, 13.181818181818182], [8.888888888888891, 13.333333333333334], [9.092056932966024, 13.484848484848484], [9.297520661157026, 13.636363636363637], [9.505280073461892, 13.787878787878787], [9.715335169880625, 13.93939393939394], [9.927685950413226, 14.090909090909092], [10.142332415059688, 14.242424242424242], [10.35927456382002, 14.393939393939394], [10.578512396694215, 14.545454545454545], [10.800045913682279, 14.696969696969697], [11.023875114784206, 14.848484848484848], [11.25, 15.0]]}, {"matrix": [[0.9659258262890683, -0.25881904510252074, 0.0, -10.0], [0.18301270189221933, 0.6830127018922194, -0.7071067811865475, 10.0], [0.1830127018922193, 0.6830127018922193, 0.7071067811865476, 5.0], [0.0, 0.0, 0.0, 1.0]], "samples": [[0.0, 0.0], [0.0, 0.21427478217774168], [0.0, 0.42854956435548336], [0.0, 0.6428243465332251], [0.0, 0.8570991287109667], [0.0, 1.0713739108887084], [0.0, 1.2856486930664501], [0.0, 1.4999234752441917], [0.0, 1.7141982574219334], [0.0, 1.9284730395996752], [0.0, 2.1427478217774167], [0.0, 2.3570226039551585], [0.0, 2.5712973861329003], [0.0, 2.785572168310642], [0.0, 2.9998469504883833], [0.0, 3.214121732666125], [0.0, 3.428396514843867], [0.0, 3.6426712970216086], [0.0, 3.8569460791993504], [0.0, 4.071220861377092], [0.0, 4.2854956435548335], [0.0, 4.499770425732575], [0.0, 4.714045207910317], [0.0, 4.928319990088059], [0.0, 5.1425947722658005], [0.0, 5.356869554443542], [0.0, 5.571144336621284], [0.0, 5.785419118799025], [0.0, 5.999693900976767], [0.0, 6.2139686831545085], [0.0, 6.42824346533225], [0.0, 6.642518247509992], [0.0, 6.856793029687734], [0.0, 7.0710678118654755], [0.0, 7.285342594043217], [0.0, 7.499617376220959], [0.0, 7.713892158398701], [0.0, 7.928166940576443], [0.0, 8.142441722754183], [0.0, 8.356716504931926], [0.0, 8.570991287109667], [0.0, 8.78526606928741], [0.0, 8.99954085146515], [0.0, 9.213815633642891], [0.0, 9.428090415820634], [0.0, 9.642365197998375], [0.0, 9.856639980176118], [0.0, 10.070914762353858], [0.0, 10.285189544531601], [0.0, 10.499464326709342], [0.0, 10.713739108887085], [0.0, 10.928013891064825], [0.0, 11.142288673242568], [0.0, 11.356563455420309], [0.0, 11.570838237598052], [0.0, 11.785113019775793], [0.0, 11.999387801953535], [0.0, 12.213662584131276], [0.0, 12.427937366309017], [0.0, 12.64221214848676], [0.0, 12.8564869306645], [0.0, 13.070761712842243], [0.0, 13.285036495019984], [0.0, 13.499311277197727], [0.0, 13.713586059375467], [0.0, 13.92786084155321], [0.0, 14.142135623730951], [0.0, 14.356410405908694], [0.0, 14.570685188086435], [0.0, 14.784959970264175], [0.0, 14.999234752441918], [0.0, 15.213509534619659], [0.0, 15.427784316797402], [0.0, 15.642059098975142], [0.0, 15.856333881152885], [0.0, 16.070608663330628], [0.0, 16.284883445508367], [0.0, 16.49915822768611], [0.0, 16.713433009863852], [0.0, 16.92770779204159], [0.0, 17.141982574219334], [0.0, 17.356257356397077], [0.0, 17.57053213857482], [0.0, 17.78480692075256], [0.0, 17.9990817029303], [0.0, 18.213356485108044], [0.0, 18.427631267285786], [0.0, 18.641906049463525], [0.0, 18.856180831641268], [0.0, 19.07045561381901], [0.0, 19.28473039599675], [0.0, 19.499005178174492], [0.0, 19.713279960352235], [0.0, 19.927554742529978], [0.0, 20.141829524707717], [0.0, 20.35610430688546], [0.0, 20.570379089063202], [0.0, 20.784653871240945], [0.0, 20.998928653418684], [0.0, 21.213203435596427]], "clip_planes": [[0.0, -1.0, 0.0, 15.0], [0.0, 1.0, 0.0, 15.0], [0.0, 0.0, -1.0, 15.0], [0.0, 0.0, 1.0, 15.0]]}, {"matrix": [[0.5000000000000001, 0.0, -0.8660254037844386, 80.0], [-0.6123724356957945, 0.7071067811865476, -0.3535533905932738, 0.0], [0.6123724356957946, 0.7071067811865475, 0.35355339059327384, 0.0], [0.0, 0.0, 0.0, 1.0]], "samples": [[0.0, 0.0], [0.0, 0.25252525252525254], [0.0, 0.5050505050505051], [0.0, 0.7575757575757576], [0.0, 1.0101010101010102], [0.0, 1.2626262626262628], [0.0, 1.5151515151515151], [0.0, 1.7676767676767677], [0.0, 2.0202020202020203], [0.0, 2.272727272727273], [0.0, 2.5252525252525255], [0.0, 2.777777777777778], [0.0, 3.0303030303030303], [0.0, 3.282828282828283], [0.0, 3.5353535353535355], [0.0, 3.787878787878788], [0.0, 4.040404040404041], [0.0, 4.292929292929293], [0.0, 4.545454545454546], [0.0, 4.7979797979797985], [0.0, 5.050505050505051], [0.0, 5.303030303030304], [0.0, 5.555555555555556], [0.0, 5.808080808080809], [0.0, 6.0606060606060606], [0.0, 6.313131313131313], [0.0, 6.565656565656566], [0.0, 6.818181818181818], [0.0, 7.070707070707071], [0.0, 7.3232323232323235], [0.0, 7.575757575757576], [0.0, 7.828282828282829], [0.0, 8.080808080808081], [0.0, 8.333333333333334], [0.0, 8.585858585858587], [0.0, 8.83838383838384], [0.0, 9.090909090909092], [0.0, 9.343434343434344], [0.0, 9.595959595959597], [0.0, 9.84848484848485], [0.0, 10.101010101010102], [0.0, 10.353535353535355], [0.0, 10.606060606060607], [0.0, 10.85858585858586], [0.0, 11.111111111111112], [0.0, 11.363636363636365], [0.0, 11.616161616161618], [0.0, 11.86868686868687], [0.0, 12.121212121212121], [0.0, 12.373737373737374], [0.0, 12.626262626262626], [0.0, 12.878787878787879], [0.0, 13.13131313131313], [0.0, 13.383838383838382], [0.0, 13.636363636363635], [0.0, 13.888888888888888], [0.0, 14.14141414141414], [0.0, 14.393939393939393], [0.0, 14.646464646464645], [0.0, 14.898989898989898], [0.0, 15.15151515151515], [0.0, 15.404040404040403], [0.0, 15.656565656565656], [0.0, 15.909090909090908], [0.0, 16.161616161616163], [0.0, 16.414141414141415], [0.0, 16.666666666666668], [0.0, 16.919191919191917], [0.0, 17.17171717171717], [0.0, 17.424242424242422], [0.0, 17.676767676767675], [0.0, 17.929292929292927], [0.0, 18.18181818181818], [0.0, 18.434343434343432], [0.0, 18.686868686868685], [0.0, 18.939393939393938], [0.0, 19.19191919191919], [0.0, 19.444444444444443], [0.0, 19.696969696969695], [0.0, 19.949494949494948], [0.0, 20.2020202020202], [0.0, 20.454545454545453], [0.0, 20.707070707070706], [0.0, 20.95959595959596], [0.0, 21.21212121212121], [0.0, 21.464646464646464], [0.0, 21.717171717171716], [0.0, 21.96969696969697], [0.0, 22.22222222222222], [0.0, 22.474747474747474], [0.0, 22.727272727272727], [0.0, 22.97979797979798], [0.0, 23.232323232323232], [0.0, 23.484848484848484], [0.0, 23.737373737373737], [0.0, 23.98989898989899], [0.0, 24.242424242424242], [0.0, 24.494949494949495], [0.0, 24.747474747474747], [0.0, 25.0]]}]}]}';

setTimeout(() => {
    tlmviewer.embed(document.getElementById("tlmviewer-b5dce371"), data);    
}, 0);
</script>

